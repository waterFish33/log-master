# log-master
一个日志系统
该日志器拥有同步写日志和异步写日志的功能
1.同步写日志
    同步日志是指当输出日志时，必须等待日志输出语句执行完毕后，才能执行后面的业务逻辑语句，日志输出语句与程序的业务逻辑语句将在同一个线程运行。
    在高并发场景下，随着日志数量不断增加，同步日志系统容易产生系统瓶颈:
        一方面大量的日志打印陷入等量的write系统调用，有一定系统开销。
        另一方面，使得打印日志的进程附带了大量同步的磁盘I0，影响程序性能。
2.异步写日志
    异步日志是指在进行日志输出时，日志输出语句与业务逻辑语句并不是在同一个线程中运行，而是有专门的线程用于进行日志输出操作。
    业务线程只需要将日志放到一个内存缓冲区中不用等待即可继续执行后续业务逻辑(作为日志的生产者)，而日志的落地操作交给单独的日志线程去完成(作为日志的消费者),这是一个典型的生产-消费模型。
    这样做的好处是即使日志没有真的地完成输出也不会影响程序的主业务，可以提高程序的性能:
        主线程调用日志打印接口成为非阻塞操作。
        同步的磁盘I0从主线程中剥离出来交给单独的线程完成。

日志等级模块:对输出日志的等级进行划分，以便于控制日志的输出，并提供等级举转字符串功能。
    UNKNOW:未定义
    DEBUG:调试，调试时的关键信息输出。
    INFO:提示，普通的提示型日志信息。
    WARN:警告，不影响运行，但是需要注意一下的日志。
    ERROR:错误，程序运行出现错误的日志
    FATAL:致命，一般是代码异常导致程序无法继续推进运行的日志
    OFF:关闭
日志消息模块:中间存储日志输出所需的各项要素信息
    时间:描述本条日志的输出时间。
    线程ID:描述本条日志是哪个线程输出的。
    日志等级:描述本条日志的等级。
    日志数据:本条日志的有效载荷数据。
    日志文件名:描述本条日志在哪个源码文件中输出的。
    日志行号:描述本条日志在源码文件的哪一行输出的。
日志消息格式化模块:设置日志输出格式，并提供对日志消息进行格式化功能。
    系统的默认日志输出格式："[%d{%H:%M:%S}] [%t] [%p] [%c] [%f:%l]%T%m%n"
    %d{%H:%M:%S}:表示日期时间，花括号中的内容表示日期时间的格式。
    %T:表示制表符缩进。
    %t:表示线程ID
    %p:表示日志级别
    %c:表示日志器名称，不同的开发组可以创建自己的日志器进行日志输出，小组之间互不影响。
    %f:表示日志输出时的源代码文件名。
    %1:表示日志输出时的源代码行号。
    %m:表示给与的日志有效载荷数据
    %n:表示换行
    设计思想:设计不同的子类，不同的子类从日志消息中取出不同的数据进行处理。
日志消息落地模块:决定了日志的落地方向，可以是标准输出，也可以是日志文件，也可以滚动文件输出....
    标准输出:表示将日志进行标准输出的打印。
    日志文件输出:表示将日志写入指定的文件末尾。
    滚动文件输出:当前以文件大小进行控制，当一个日志文件大小达到指定大小，则切换下一个文件进行输出后期，也可以扩展远程日志输出，创建客户端，将日志消息发送给远程的日志分析服务器。
    设计思想:设计不同的子类，不同的子类控制不同的日志落地方向。
日志器模块:
    此模块是对以上几个模块的整合模块，用户通过日志器进行日志的输出，有效降低用户的使用难度。
    包含有:日志消息落地模块对象，日志消息格式化模块对象，日志输出等级
日志器管理模块:
    为了降低项目开发的日志耦合，不同的项目组可以有自己的日志器来控制输出格式以及落地方向，因此本项目是一个多日志器的日志系统。
    管理模块就是对创建的所有日志器进行统一管理。并提供一个默认日志器提供标准输出的日志输出。
异步线程模块:
    实现对日志的异步输出功能，用户只需要将输出日志任务放入任务池，异步线程负责日志的落地输出功能，以此提供更加高效的非阻塞日志输出。

整个程序易于扩展，使用者想添加不同的落地方式时可以在日志消息落地模块中添加自己的落地方式。


具体使用可以参考use_example中的文件进行使用